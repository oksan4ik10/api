(()=>{"use strict";var t={426:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,'*{\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n    font-family: \'Lato\', sans-serif;\r\n    color: #fff;\r\n}\r\nbody{\r\n    background: rgb(2,0,36);\r\n    background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(252,217,255,1) 58%, rgba(0,0,0,1) 100%);\r\n    margin-left: 10px;\r\n}\r\nsvg{\r\n    width: 100px;\r\n    margin-bottom: -20px;\r\n}\r\n.header {\r\n    margin-top: 30px;\r\n    margin-left: 20px;\r\n    margin-bottom: 20px;\r\n}\r\n.header__btns{\r\n    display: flex;\r\n    gap: 20px;\r\n}\r\n\r\n\r\n.btn { \r\n    border-radius: 5px;\r\n    padding: 7px 5px;\r\n    font-weight: 600;\r\n    background: #fff;\r\n    text-transform: uppercase;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n    position: relative;\r\n    display: inline-block;\r\n     box-shadow:inset 2px 2px 2px 0px rgba(255,255,255,.5),\r\n     7px 7px 20px 0px rgba(0,0,0,.1),\r\n     4px 4px 5px 0px rgba(0,0,0,.1);\r\n    outline: none;\r\n  }\r\n  .btn_g{\r\n    background: rgba(252,217,255,1);\r\n    color:rgb(139, 125, 125);\r\n\r\n  }\r\n  .btn {\r\n    border: none;\r\n    border-radius: 5px;\r\n    color: #000;\r\n    z-index: 1;\r\n  }\r\n  .btn:after {\r\n    position: absolute;\r\n    content: "";\r\n    width: 0;\r\n    height: 100%;\r\n    border-radius: 5px;\r\n    top: 0;\r\n    left: 0;\r\n    direction: rtl;\r\n    z-index: -1;\r\n    box-shadow:\r\n     -7px -7px 20px 0px #fff9,\r\n     -4px -4px 5px 0px #fff9,\r\n     7px 7px 20px 0px #0002,\r\n     4px 4px 5px 0px #0001;\r\n    transition: all 0.3s ease;\r\n  }\r\n  .btn:not(:disabled):hover {\r\n    color: #4c1751;\r\n    border-radius: 5px;\r\n\r\n  }\r\n  .btn:not(:disabled):hover:after {\r\n    left: auto;\r\n    right: 0;\r\n    width: 100%;\r\n  }\r\n  .btn:not(:disabled):active {\r\n    top: 2px;\r\n  }\r\n\r\n.btn {\r\n}\r\n.btn__garage {\r\n}\r\n.btn_g {\r\n}\r\n.btn__win {\r\n}\r\n.garage {\r\n}\r\n.garage__settings {\r\n}\r\n.settings {\r\n    margin-left: 20px;\r\n    margin-bottom: 20px;\r\n}\r\n.settings__form {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n    margin-bottom: 5px;\r\n}\r\n.settings__input {\r\n    padding: 5px;\r\n    border-radius: 5px;\r\n    color:#000;\r\n\r\n}\r\n.settings__input:focus{\r\n    outline: none;\r\n}\r\n\r\n*:disabled {\r\n    background-color: rgb(93, 85, 85);\r\n    color: linen;\r\n    opacity: 0.6;\r\n}\r\n.create__btn {\r\n}\r\n.update__btn {\r\n}\r\n.settings__btns {\r\n    display: flex;\r\n    gap: 10px;\r\n}\r\n.btn__start {\r\n}\r\n.btn__reset {\r\n}\r\n.btn__generate {\r\n}\r\n.garage__game {\r\n}\r\n.game {\r\n    position: relative;\r\n}\r\n.title,.subtitle{\r\n    text-transform: capitalize;\r\n\r\n}\r\n.game__title {\r\n}\r\n.game__subtitle {\r\n    margin-bottom: 10px;\r\n\r\n}\r\n.game__cats {\r\n}\r\n.cats {\r\n}\r\n.cats__item {\r\n}\r\n.cat {\r\n    margin-top: 10px;\r\n}\r\n.cat__btns {\r\n    display: flex;\r\n    align-items: center;\r\n    gap:10px;\r\n}\r\n.cat__btn{\r\n    padding: 4px 7px;\r\n    color:rgb(67, 28, 70);\r\n    cursor: pointer;\r\n    font-weight: 600;\r\n    opacity: 1;\r\n}\r\n.cat__btn[disabled=true]{\r\n    opacity: .5;\r\n\r\n}\r\n\r\n.cat__block{\r\n    position: relative;\r\n}\r\n.cat__area {\r\n    display: flex;\r\n    align-items:center;\r\n    gap:10px;\r\n    padding:30px 0px;    \r\n}\r\n.cat__area  .cat__img{\r\n    position: absolute;\r\n    top:0;\r\n\r\n\r\n}\r\n.cat__block{\r\n    display: flex;\r\n    justify-content: space-between;\r\n    border-bottom: 1px dashed rgb(90, 186, 69);\r\n    align-items: flex-end;\r\n    position: relative;\r\n}\r\n.cat__finish{\r\n    margin-bottom: -7px;\r\n    margin-right: 5%;\r\n}\r\n.cat__finish svg{\r\n    width: 70px;\r\n}\r\n.cat__start {\r\n}\r\n.cat__stop {\r\n}\r\n.pagination{\r\n    margin-top: 20px;\r\n    margin-bottom: 10px;\r\n    display: flex;\r\n    gap: 10px;\r\n}\r\n.table {\r\n\r\n\tborder: none;\r\n\tmargin-bottom: 20px;\r\n}\r\n.table thead th {\r\n\tpadding: 10px;\r\n    padding-right: 20px;\r\n\tfont-weight: 500;\r\n\tfont-size: 16px;\r\n\tline-height: 20px;\r\n\ttext-align: left;\r\n\tcolor: #fff;\r\n\tborder-top: 2px solid #716561;\r\n\tborder-bottom: 2px solid #716561;\r\n    position: relative;\r\n \r\n}\r\nth.table__sort{\r\n    cursor: pointer;\r\n}\r\nth.table__sort::after {\r\n    content: "→";\r\n    position: absolute;\r\n    transform: translateY(10%) rotate(90deg);\r\n  }\r\n  th.table__sort::before {\r\n    content: "→";\r\n    position: absolute;\r\n    right: 0;\r\n    transform: translateY(10%) rotate(-90deg);\r\n  }\r\ntd svg{\r\n    width: 30px;\r\n    margin-bottom: 0px;\r\n \r\n    \r\n\r\n}\r\n.table tbody td {\r\n    text-align: center;\r\n\tpadding: 7px;\r\n\tfont-size: 14px;\r\n\tline-height: 20px;\r\n    font-weight: 500;\r\n\tcolor: #fff;\r\n\tborder-top: 1px solid #716561;\r\n}\r\n.modal{\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 999;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n \r\n}\r\n\r\n.modal h2{\r\n    font-family: \'Inter\';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 4rem;\r\n    z-index: 999;\r\n    color: #FFFFFF;\r\n    text-shadow: -6px 0px 21px rgb(255, 0, 0);\r\n\r\n\r\n\r\n}',""]);const a=i},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(i[s]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},654:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var r=n(379),i=n.n(r),a=n(426);i()(a.Z,{insert:"head",singleton:!1});const s=a.Z.locals||{}},379:(t,e,n)=>{var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function s(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function o(t,e){for(var n={},r=[],i=0;i<t.length;i++){var o=t[i],c=e.base?o[0]+e.base:o[0],d=n[c]||0,l="".concat(c," ").concat(d);n[c]=d+1;var h=s(l),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(a[h].references++,a[h].updater(u)):a.push({identifier:l,updater:b(u,e),references:1}),r.push(l)}return r}function c(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var s=i(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var d,l=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,i);else{var a=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(a,s[e]):t.appendChild(a)}}function u(t,e,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,m=0;function b(t,e){var n,r,i;if(e.singleton){var a=m++;n=p||(p=c(e)),r=h.bind(null,n,a,!1),i=h.bind(null,n,a,!0)}else n=c(e),r=u.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=o(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var c=o(t,e),d=0;d<n.length;d++){var l=s(n[d]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=c}}}},944:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{c(r.next(t))}catch(t){a(t)}}function o(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Api=e.localAdress=void 0,e.localAdress="http://127.0.0.1:3000",e.Api=class{static getCats(t,r){return n(this,void 0,void 0,(function*(){const n=new URL(e.localAdress+"\\garage");n.searchParams.set("_limit",String(t)),n.searchParams.set("_page",String(r));const i=yield fetch(n),a=i.headers.get("X-Total-Count");return{cats:yield i.json(),count:a}}))}static getCat(t){return n(this,void 0,void 0,(function*(){const n=yield fetch(`${e.localAdress}\\garage\\${t}`);return yield n.json()}))}static create(t){return n(this,void 0,void 0,(function*(){const n=yield fetch(`${e.localAdress}\\garage`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});return yield n.json()}))}static update(t,r){return n(this,void 0,void 0,(function*(){const n=yield fetch(`${e.localAdress}\\garage\\${t}`,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)});if(200===n.status)return yield n.json();console.error("Cat not found!")}))}static delete(t){return n(this,void 0,void 0,(function*(){const n=yield fetch(`${e.localAdress}\\garage\\${t}`,{method:"DELETE"}),r=yield fetch(`${e.localAdress}\\winners\\${t}`,{method:"DELETE"});200===n.status&&200===r.status||console.error("Cat not found!")}))}static getWinners(t,r,i,a){return n(this,void 0,void 0,(function*(){const n=new URL(e.localAdress+"\\winners");n.searchParams.set("_limit",String(t)),n.searchParams.set("_page",String(r)),i&&n.searchParams.set("_sort",i),a&&n.searchParams.set("_order",a);const s=yield fetch(n),o=s.headers.get("X-Total-Count");return{winners:yield s.json(),count:o}}))}static getWin(t){return n(this,void 0,void 0,(function*(){const n=yield fetch(`${e.localAdress}\\winners\\${t}`);if(200===n.status)return yield n.json();console.error("Cat isn't winner")}))}static createWin(t){return n(this,void 0,void 0,(function*(){const n=yield fetch(`${e.localAdress}\\winners`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});return yield n.json()}))}static updateWin(t){return n(this,void 0,void 0,(function*(){const n=yield fetch(`${e.localAdress}\\winners\\${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({wins:t.wins,time:t.time})});if(200===n.status)return yield n.json();console.error("Cat not found!")}))}static startCat(t,r,i){return n(this,void 0,void 0,(function*(){const n=new URL(e.localAdress+"\\engine");n.searchParams.set("id",String(t)),n.searchParams.set("status",i);const a=yield fetch(n,{method:"PATCH"});return 200===a.status?yield a.json():(500===a.status?console.error(`${a.status}: Cat ${r} isn't hungry`):console.error(`${a.status}: ${a.statusText}`),!1)}))}}},872:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const i=r(n(520));class a extends i.default{constructor(t,e){super(t,e),this.btnGarage=document.createElement("button"),this.btnWin=document.createElement("button")}createGarage(){window.location.hash="garage"}createWin(){window.location.hash="win"}createHeader(){const t=document.createElement("div");return t.className="header__btns",this.btnGarage.className="btn btn__garage btn_g",this.btnWin.className="btn btn__win btn_g",this.btnGarage.textContent="shelter",this.btnWin.textContent="winner",t.append(this.btnGarage),t.append(this.btnWin),t}render(){return this.container.append(this.createHeader()),this.btnGarage.addEventListener("click",this.createGarage),this.btnWin.addEventListener("click",this.createWin),this.container}}e.Header=a},844:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{c(r.next(t))}catch(t){a(t)}}function o(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Cat=void 0;const a=i(n(520)),s=n(944);class o extends a.default{static catImg(t){return`<svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1920" fill="${t}" class="cat__img">\n    <g>\n            .st0{fill:#fff}.st1{fill:none;stroke:#231f20;stroke-width:50;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\n        </style>\n        <path class="st0" d="M553.9 820.9s-137.5-53.7-137.5-234.6c0-140.3 82.6-144.2 119.8-138.9 11.5 1.6 22.9-3.1 29.9-12.4 13.1-17.4 5.1-42.6-15.6-49.2-69.6-22.2-206.7-35-222.6 200.5 0 0-12.2 165.7 131.4 310.2L425.7 1101s-43.3 83.6-98 111.1-104.1 250.5-104.1 250.5l128.6 90.8s49.8-67.1-23.5-113c8 4.3 13.8-132.9 85-159.9C499.4 1248 548 1230 548 1230l-15.3 129.4 85.5 186.1H774s26.6-99.4-84.2-70.3c0 0-62.5-30.9-50.3-95.1 12.2-64.2 61.1-64.9 91.7-150.1h287.2s-5 144-51.4 195.9v119.5h158.3s-7.2-80.3-85.3-71.4c0 0 45.6-204 128.1-228.4l103.9 3.1 51.9 70.3 232.6 226.4h140.2s0-96-105.5-77.2c0 0-172.5-201.9-169.5-238.2s-6.1-227.7 85.5-278.7h94.7l48.9-54.8-51.9-66.4s-12.2-58.4-85.5-65.9l-3.1-84.9-73.3 84.9s-70.3 4.8-171.1 105.6c0 0-375.8-52.5-397.2-67.5-.1 0-203.1-38.9-314.8 18.6z" id="Layer_2"/>\n        <path class="st1" d="M553.9 820.9s-137.5-53.7-137.5-234.6c0-140.3 82.6-144.2 119.8-138.9 11.5 1.6 22.9-3.1 29.9-12.4 13.1-17.4 5.1-42.6-15.6-49.2-69.6-22.2-206.7-35-222.6 200.5 0 0-12.2 165.7 131.4 310.2L425.7 1101s-43.3 83.6-98 111.1-104.1 250.5-104.1 250.5l128.6 90.8s49.8-67.1-23.5-113c8 4.3 13.8-132.9 85-159.9C499.4 1248 548 1230 548 1230l-15.3 129.4 85.5 186.1H774s26.6-99.4-84.2-70.3c0 0-62.5-30.9-50.3-95.1 12.2-64.2 61.1-64.9 91.7-150.1h287.2s-5 144-51.4 195.9v119.5h158.3s-7.2-80.3-85.3-71.4c0 0 45.6-204 128.1-228.4l103.9 3.1 51.9 70.3 232.6 226.4h140.2s0-96-105.5-77.2c0 0-172.5-201.9-169.5-238.2s-6.1-227.7 85.5-278.7h94.7l48.9-54.8-51.9-66.4s-12.2-58.4-85.5-65.9l-3.1-84.9-73.3 84.9s-70.3 4.8-171.1 105.6c0 0-375.8-52.5-397.2-67.5-.1 0-203.1-38.9-314.8 18.6z" id="STROKES"/>\n        <g>\n    </svg>`}static finishImg(t){return`<svg version="1.1" viewBox="0 0 3300 3300"  xmlns="http://www.w3.org/2000/svg" fill="${t}"><defs></defs><g id="Layer_x0020_1"><g id="_221226120"><path class="fil0" d="M2708 1083l-2116 0c0,584 474,1058 1058,1058 584,0 1058,-474 1058,-1058z"/><path class="fil0" d="M1317 2071l652 0 53 98c38,55 -18,49 -119,47 -119,-3 -211,0 -306,0 -79,0 -159,1 -258,0 -83,-1 -100,6 -54,-85l32 -60z"/><path class="fil1" d="M1650 2071l0 -987 -1058 0c0,465 300,860 717,1002l8 -14 333 0z"/><path class="fil1" d="M1650 2071l-333 0 -8 14 -25 45c-46,91 -29,84 54,85 99,1 179,0 258,0 18,0 35,0 53,0l0 -74 0 -70z"/></g></g></svg>`}constructor(t,e,n,r,i){super(t,e),this.name=n,this.color=r,this.id=i,this.btnA=document.createElement("button"),this.btnB=document.createElement("button"),this.stopAnimate={}}createCat(){this.btnB.setAttribute("disabled","true"),this.container.setAttribute("id",String(this.id)),this.container.innerHTML=`\n    <div class="cat__btns">\n        <button class="btn btn__select">select</button>\n        <button class="btn btn__remove">remove</button>\n        <p class="cat__name">${this.name}</p>\n    </div>`;const t=document.createElement("div");t.className="cat__block";const e=document.createElement("div");e.className="cat__area",this.btnA.className="cat__start cat__btn active",this.btnB.className="cat__stop cat__btn",this.btnA.textContent="A",this.btnB.textContent="B",e.append(this.btnA),e.append(this.btnB);const n=document.createElement("div");n.innerHTML=o.catImg(this.color),e.append(n),t.append(e);const r=document.createElement("div");r.className="cat__finish",r.innerHTML=o.finishImg(this.color),t.append(r),this.container.append(t)}startPromiseCat(){return s.Api.startCat(this.id,this.name,"started")}drivePromiseCat(){return s.Api.startCat(this.id,this.name,"drive")}clickABtn(){return r(this,void 0,void 0,(function*(){const t=yield this.startPromiseCat();this.row(t)}))}drive(t){t||(this.stopAnimate=void 0)}row(t){return r(this,void 0,void 0,(function*(){this.btnA.setAttribute("disabled","true"),this.btnB.removeAttribute("disabled");const e=t.distance/t.velocity,n=performance.now(),r=this.container.querySelector("svg");let i,a=0;if(r&&(a=100-(r.getBoundingClientRect().x+120)/window.screen.availWidth*100),i=requestAnimationFrame((function t(s){let o=(s-n)/e;o>1&&(o=1);const c=o;r&&(r.style.right=`calc(${a}% - ${c*a}%)`),o<1&&(i=requestAnimationFrame(t))})),yield this.drivePromiseCat())return{cat:this,time:(e/1e3).toFixed(2)};throw cancelAnimationFrame(i),new Error("505!")}))}stopCat(){return r(this,void 0,void 0,(function*(){yield s.Api.startCat(this.id,this.name,"stopped")}))}stop(){return r(this,void 0,void 0,(function*(){yield this.stopCat(),this.btnA.removeAttribute("disabled"),this.container.textContent="",this.createCat()}))}render(){return this.createCat(),this.btnA.addEventListener("click",this.clickABtn.bind(this)),this.btnB.addEventListener("click",this.stop.bind(this)),this.container}}e.Cat=o},737:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FormCat=void 0,e.FormCat=class{constructor(t,e){this.container=document.createElement("form"),this.container.className=t,this.container.id=e,this.inputText=document.createElement("input"),this.inputText.type="text",this.inputText.className="settings__input",this.color=document.createElement("input"),this.color.type="color",this.btn=document.createElement("button"),this.btn.className="btn create__btn",this.btn.textContent=e}setDisabled(t){this.container.querySelectorAll("*").forEach((e=>{"true"===t?e.setAttribute("disabled",t):e.removeAttribute("disabled")}))}render(){return this.container.append(this.inputText),this.container.append(this.color),this.container.append(this.btn),this.container}}},520:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e){this.container=document.createElement(t),this.container.className=e}render(){return this.container}}},976:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{c(r.next(t))}catch(t){a(t)}}function o(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.container=document.createElement("div"),this.area=document.createElement("div"),this.container.id=t,this.title=document.createElement("h1"),this.subtitle=document.createElement("h3"),this.count=document.createElement("span"),this.pageCount=document.createElement("span"),this.title.className="title",this.subtitle.className="subtitle",this.btnNext=document.createElement("button"),this.btnPrev=document.createElement("button"),this.btnNext.className="btn btn__next",this.btnPrev.className="btn btn__prev",this.btnNext.textContent="Next",this.btnPrev.textContent="Prev",this.page=1}createArea(){return n(this,void 0,void 0,(function*(){}))}createPagination(t,e){const n=document.createElement("div");return n.className="pagination",n.append(this.btnPrev),n.append(this.btnNext),t<e?(this.btnNext.setAttribute("disabled","true"),this.btnPrev.setAttribute("disabled","true")):(this.btnNext.removeAttribute("disabled"),this.btnPrev.removeAttribute("disabled")),n}changePageNext(){return n(this,void 0,void 0,(function*(){this.page++,yield this.createArea()}))}changePagePrev(){return n(this,void 0,void 0,(function*(){this.page--,0!==this.page?yield this.createArea():this.page=1}))}render(){return this.container}}},416:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const r=n(872),i=n(521),a=n(969);class s{static renderPage(t){const e=document.querySelector(`#${s.defaultPageId}`);e&&e.remove();let n=null;if("garage"===t?n=new i.Main(t):"win"===t&&(n=new a.Win(t)),n){const t=n.render();t.id=s.defaultPageId,s.container.append(t)}}constructor(){this.header=new r.Header("header","header")}enableRouteChange(){window.addEventListener("hashchange",(()=>{const t=window.location.hash.slice(1);s.renderPage(t)}))}run(){s.container.append(this.header.render());const t=window.location.hash.slice(1);t?s.renderPage(t):s.renderPage("garage"),this.enableRouteChange()}}e.App=s,s.container=document.body,s.defaultPageId="current-page",s.pageCreate=1,s.pageWinCreate=1},521:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{c(r.next(t))}catch(t){a(t)}}function o(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Main=void 0;const a=i(n(976)),s=n(416),o=n(844),c=n(944),d=n(737);class l extends a.default{static randomColor(){const t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),n=Math.floor(256*Math.random());return"#"+t.toString(16)+e.toString(16)+n.toString(16)}static randomNum(t){return t[Math.floor(Math.random()*t.length)]}static randomName(){return l.randomNum(["Persian","Bengal","Burmese","Scottish Fold","Sphynx","American Curl","American Bobtail","Siamese","Maine Coon","Chartreux"])+" "+l.randomNum(["Luna","Nala","Oliver","Ollie","Leo","Simba","Milo","Tigger","Max","Lola","Bella"])}constructor(t){super(t),this.cats=[],this.areaCats=document.createElement("div"),this.formCreate=new d.FormCat("settings__form","create"),this.formUpdate=new d.FormCat("settings__form","update"),this.page=s.App.pageCreate,this.btnGenerate=document.createElement("button"),this.btnLunch=document.createElement("button"),this.btnReset=document.createElement("button"),this.modal=document.createElement("div")}createArea(){return r(this,void 0,void 0,(function*(){this.area.className="game",this.title.classList.add("game__title"),this.subtitle.classList.add("game__subtitle");const t=yield c.Api.getCats(7,this.page);if(0===t.cats.length)return;this.cats=[],s.App.pageCreate=this.page,this.area.textContent="";const e=t.count;this.subtitle.textContent="Page #",this.title.textContent="shelter ",this.count.textContent=`(${e})`,this.pageCount.textContent=String(this.page),this.title.append(this.count),this.subtitle.append(this.pageCount),this.area.append(this.title),this.area.append(this.subtitle),this.areaCats.textContent="",this.areaCats.className="cats__item cat",t.cats.forEach((t=>{const e=new o.Cat("div","cats__item cat",t.name,t.color,t.id);this.cats.push(e),this.areaCats.append(e.render())})),this.area.append(this.areaCats),yield this.area.append(this.createPagination(Number(e),7)),this.container.append(this.area)}))}createMain(){const t=document.createElement("div");t.className="settings",t.append(this.formCreate.render()),t.append(this.formUpdate.render()),this.formUpdate.setDisabled("true");const e=document.createElement("div");e.className="settings__btns",this.btnGenerate.className="btn__generate btn",this.btnGenerate.textContent="generate cat",this.btnLunch.className="btn__lunch btn btn_g",this.btnLunch.textContent="Lunch",this.btnReset.className="btn__reset btn btn_g",this.btnReset.textContent="reset",this.btnReset.setAttribute("disabled","true"),e.append(this.btnLunch),e.append(this.btnReset),e.append(this.btnGenerate),t.append(e),this.container.append(t)}createCat(t){return r(this,void 0,void 0,(function*(){yield c.Api.create(t)}))}createCatBtn(t){t.preventDefault();const e=this.formCreate.inputText.value;if(!e)return;const n=this.formCreate.color.value;n&&(this.createCat({name:e,color:n}),this.createArea())}generateCat(){return r(this,void 0,void 0,(function*(){l.randomColor();for(let t=0;t<100;t++)this.createCat({name:l.randomName(),color:l.randomColor()});this.createArea()}))}updateCat(t,e){return r(this,void 0,void 0,(function*(){yield c.Api.update(t,e)}))}updateCatBtn(t){t.preventDefault();const e=t.target.id,n=this.formUpdate.inputText.value;if(!n)return;const r=this.formUpdate.color.value;r&&(this.updateCat(Number(e),{name:n,color:r}),this.formUpdate.container.reset(),this.formUpdate.setDisabled("true"),this.createArea())}btnSelect(t){return r(this,void 0,void 0,(function*(){const e=yield c.Api.getCat(Number(t));this.formUpdate.setDisabled("false"),this.formUpdate.btn.id=String(e.id),this.formUpdate.inputText.value=e.name,this.formUpdate.color.value=e.color}))}btnRemove(t){return r(this,void 0,void 0,(function*(){yield c.Api.delete(Number(t)),this.createArea()}))}btnsCat(t){var e;const n=t.target;if(!n.matches(".btn"))return;const r=null===(e=n.closest(".cat"))||void 0===e?void 0:e.getAttribute("id");return r?n.matches(".btn__select")?this.btnSelect(r):this.btnRemove(r):void 0}startGame(){return r(this,void 0,void 0,(function*(){this.btnLunch.setAttribute("disabled","true"),this.btnNext.setAttribute("disabled","true"),this.btnPrev.setAttribute("disabled","true");const t=yield Promise.allSettled(this.cats.map((t=>t.startPromiseCat()))),e=yield Promise.any(t.map(((t,e)=>{if("fulfilled"===t.status)return this.cats[e].row(t.value)})));this.btnReset.removeAttribute("disabled"),e&&(this.createModal(e),this.addWinner(e))}))}addWinner(t){return r(this,void 0,void 0,(function*(){const e=yield c.Api.getWin(t.cat.id);let n;e?(n=e.time,n>Number(t.time)&&(n=Number(t.time)),yield c.Api.updateWin({id:t.cat.id,time:n,wins:++e.wins})):yield c.Api.createWin({id:t.cat.id,time:Number(t.time),wins:1})}))}createModal(t){this.modal.textContent="",this.modal.className="modal active";const e=document.createElement("div");e.className="modal__wrapper";const n=document.createElement("h2");n.textContent=`${t.cat.name} ate first (${t.time} s)`,e.append(n),this.modal.append(e),this.areaCats.append(this.modal)}resetGame(){return r(this,void 0,void 0,(function*(){this.btnReset.setAttribute("disabled","true"),yield Promise.allSettled(this.cats.map((t=>t.stopCat()))),this.cats.forEach((t=>t.btnA.removeAttribute("disabled"))),this.btnLunch.removeAttribute("disabled"),this.createArea()}))}render(){return this.createArea(),this.createMain(),this.formCreate.btn.addEventListener("click",this.createCatBtn.bind(this)),this.btnNext.addEventListener("click",this.changePageNext.bind(this)),this.btnPrev.addEventListener("click",this.changePagePrev.bind(this)),this.btnGenerate.addEventListener("click",this.generateCat.bind(this)),this.areaCats.addEventListener("click",this.btnsCat.bind(this)),this.formUpdate.btn.addEventListener("click",this.updateCatBtn.bind(this)),this.btnLunch.addEventListener("click",this.startGame.bind(this)),this.btnReset.addEventListener("click",this.resetGame.bind(this)),this.container}}e.Main=l},969:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function s(t){try{c(r.next(t))}catch(t){a(t)}}function o(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Win=void 0;const a=i(n(976)),s=n(944),o=n(416),c=n(844);class d extends a.default{constructor(t){super(t),this.page=o.App.pageWinCreate,this.thead=document.createElement("thead"),this.sort="id",this.order="asc"}createTableHead(){this.thead.textContent="";const t=document.createElement("tr"),e=document.createElement("th");e.textContent="ID",t.append(e);const n=document.createElement("th");n.textContent="Cat",t.append(n);const r=document.createElement("th");r.textContent="Name",t.append(r);const i=document.createElement("th");i.textContent="Wins",i.id="wins",i.className=`table__sort ${this.order}`,t.append(i);const a=document.createElement("th");return a.textContent="Best time(sec)",a.id="time",a.className=`table__sort ${this.order}`,t.append(a),this.thead.append(t),this.thead}createRowTable(t,e){const n=Object.assign(t,e),r=document.createElement("tr");return["id","color","name","wins","time"].forEach((t=>{const e=document.createElement("td");"color"===t&&(e.innerHTML=c.Cat.catImg(n[t])),"id"!==t&&"name"!==t&&"wins"!==t&&"time"!==t||(e.textContent=String(n[t])),r.append(e)})),r}createArea(){return r(this,void 0,void 0,(function*(){this.area.className="winners",this.title.classList.add("winners__title"),this.subtitle.classList.add("winners__subtitle");const t=yield s.Api.getWinners(10,this.page,this.sort,this.order);if(0===t.winners.length&&0===Number(t.count))return void(this.container.textContent="Winners not found");if(0===t.winners.length)return void this.page--;o.App.pageWinCreate=this.page;const e=t.count;this.area.textContent="",this.subtitle.textContent="Page #",this.title.textContent="Winners ",this.count.textContent=`(${e})`,this.pageCount.textContent=String(this.page),this.title.append(this.count),this.subtitle.append(this.pageCount),this.area.append(this.title),this.area.append(this.subtitle),this.container.append(this.area);const n=document.createElement("table");n.className="table winners__table",n.append(this.createTableHead());const i=document.createElement("tbody");t.winners.forEach((t=>r(this,void 0,void 0,(function*(){const e=yield s.Api.getCat(t.id);i.append(this.createRowTable(e,t))})))),n.append(i),this.area.append(n),this.area.append(this.createPagination(Number(e),10))}))}sortWinners(t){const e=t.target;e.matches(".table__sort")&&(this.sort=e.id,e.matches(".asc")?this.order="desc":this.order="asc",this.createArea())}render(){return this.createArea(),this.thead.addEventListener("click",this.sortWinners.bind(this)),this.btnNext.addEventListener("click",this.changePageNext.bind(this)),this.btnPrev.addEventListener("click",this.changePagePrev.bind(this)),this.container}}e.Win=d}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={id:r,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0,n(654),(new(n(416).App)).run(),console.log("Функциональные требования - 190 баллов, нефункциональные требования - 150")})();